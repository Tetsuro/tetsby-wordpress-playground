{"data":{"wordpressPost":{"title":"Shopify Theme from Scratch Part 13: Customer Accounts 2/2","content":"<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/07/part13_banner.png\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/07/part13_banner.png\" alt=\"part13_banner\" width=\"800\" height=\"186\" class=\"alignnone size-full wp-image-3678 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/07/part13_banner.png 800w, https://www.tetchi.ca/wp-content/uploads/2013/07/part13_banner-300x69.png 300w\" sizes=\"(max-width: 800px) 100vw, 800px\" /></a></p>\n<p>Today we&#8217;re going to finish the last set of customer account templates. We&#8217;ve got three more templates to go: account.liquid, order.liquid, and addresses.liquid.</p>\n<p>Vamos!</p>\n<p><!--more--></p>\n<h2 class=\"step\">1. Run some orders</h2>\n<p>The first thing we&#8217;re going to do is run some test orders through a customer account so that we can see a list of orders on our account.liquid and order.liquid templates.</p>\n<p>Log in to the customer account that you created in Part 11. Add some products to the cart, proceed to check out, and complete the order. Repeat this process a few times until you have about 2-3 test orders.</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/orders.png\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/orders.png\" alt=\"orders\" width=\"1260\" height=\"578\" class=\"alignnone size-full wp-image-3688 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/orders.png 1260w, https://www.tetchi.ca/wp-content/uploads/2013/08/orders-300x137.png 300w, https://www.tetchi.ca/wp-content/uploads/2013/08/orders-1024x469.png 1024w\" sizes=\"(max-width: 1260px) 100vw, 1260px\" /></a></p>\n<div class=\"sub\">Figure 13.1: Run some test orders until you have 2-3 orders for the customer</div>\n<h2 class=\"step\">2. Set up account.liquid</h2>\n<p>The account.liquid template is where the customer can see an overview of his/her account. This includes information such as his/her primary address and recent orders.</p>\n<p>The first thing we&#8217;ll do is split up the code into two columns. Open account.liquid, remove its contents, and insert the code below.</p>\n<pre>\n<code>{% layout settings.customer_layout %}\n\n&lt;h2&gt;Account Details and Order History&lt;/h2&gt;\n\n  &lt;div class=\"clearfix\"&gt;\n    &lt;div class=\"account-user left\"&gt;  \n    &lt;/div&gt;   \n    &lt;div class=\"account-table right\"&gt;      \n    &lt;/div&gt;    \n  &lt;/div&gt;</code>\n</pre>\n<p>Let&#8217;s add the customer&#8217;s information in the left sidebar using the variables of the <a href=\"http://docs.shopify.com/themes/liquid-variables/customer\">Customer</a> object. We&#8217;re going to output the customer&#8217;s name, email, and default address.</p>\n<pre>\n<code>...\n  &lt;div class=\"clearfix\"&gt;\n    &lt;div class=\"account-user left\"&gt;\n      <span style=\"color:red;\">&lt;div class=\"user-name\"&gt;\n          &lt;strong&gt;{{ customer.name }}&lt;/strong&gt;\n          {{ customer.email }}\n      &lt;/div&gt;\n  \n        {% if customer.default_address != nil %}\n        {{ customer.default_address.address1 }}\n        {% if customer.default_address.address2 != \"\" %}\n        {{ customer.default_address.address2 }}\n        {% endif %}\n        {{ customer.default_address.city}}, {% if address.province_code %}{{customer.default_address.province_code}}, {% endif %}{{customer.default_address.country}}\n        {{ customer.default_address.zip}}\n        {{ customer.default_address.phone }}\n        {% endif %}\n        &lt;a href=\"/account/addresses\"&gt;View Addresses ({{ customer.addresses_count }})&lt;/a&gt;</span>\n    &lt;/div&gt;\n...</code>\n</pre>\n<p>The user&#8217;s account details is now shown in the left sidebar.</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/user-account-info.png\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/user-account-info.png\" alt=\"user account info\" width=\"1013\" height=\"671\" class=\"alignnone size-full wp-image-3689 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/user-account-info.png 1013w, https://www.tetchi.ca/wp-content/uploads/2013/08/user-account-info-300x198.png 300w\" sizes=\"(max-width: 1013px) 100vw, 1013px\" /></a></p>\n<div class=\"sub\">Figure 13.2: The customer information is output in the left-hand column</div>\n<p>Now let&#8217;s add a table to output the customer&#8217;s past orders. We&#8217;re going to do a for loop through the &#8220;orders&#8221; array that is part of the <a href=\"http://docs.shopify.com/themes/liquid-variables/customer\">Customer</a> object. We can then use each order in the array to output any order details from the <a href=\"http://docs.shopify.com/themes/liquid-variables/order\">Order</a> object.</p>\n<pre>\n<code>...\n&lt;div class=\"account-table right\"&gt;\n      <span style=\"color:red;\">{% if customer.orders.size != 0 %}\n      &lt;table&gt;\n        &lt;thead&gt;\n          &lt;tr class=\"cart-headers\"&gt;\n            &lt;th&gt;Order&lt;/th&gt;\n            &lt;th&gt;Date&lt;/th&gt;\n            &lt;th&gt;Payment Status&lt;/th&gt;\n            &lt;th&gt;Fulfillment Status&lt;/th&gt;\n            &lt;th&gt;Total&lt;/th&gt;\n          &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n          {% for order in customer.orders %}\n          &lt;tr {% if order.cancelled %}class=\"cancelled_order\"{% endif %}&gt;\n            &lt;td&gt;{{ order.name | link_to: order.customer_url }}&lt;/td&gt;\n            &lt;td&gt;<span>{{ order.created_at | date: \"%b %d, %Y\" }}</span>&lt;/td&gt;\n            &lt;td&gt;<span class=\"status_{{ order.financial_status }}\">{{ order.financial_status }}</span>&lt;/td&gt;\n            &lt;td&gt;<span class=\"status_{{ order.fulfillment_status }}\">{{ order.fulfillment_status }}</span>&lt;/td&gt;\n            &lt;td&gt;<span>{{ order.total_price | money }}</span>&lt;/td&gt;\n          &lt;/tr&gt;\n          {% endfor %}\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n      {% else %}\n      You haven't placed any orders yet.\n      {% endif %}</span>\n    &lt;/div&gt;\n  &lt;/div&gt;</code>\n</pre>\n<p>Finally we&#8217;ll add some CSS to make things prettier. Open style.css, and insert the following CSS code at the bottom:</p>\n<pre>\n<code>.account-user{ margin-right:60px; width:172px; font-size:14px;}\n.account-user p{margin:0;}\n.user-name{margin-bottom:20px;}\n.account-table{width: 728px;}\n.account-table table{width:100%; text-align:left;}\n.account-table td{padding-top:15px;}\n.account-table tbody, .last-row td, .account-user .status{padding-bottom:15px;}\n.account-table tfoot{text-align:right; border-top:1px solid #ccc;}\n.cart-headers{border-bottom:1px solid #ccc;}</code>\n</pre>\n<p>Your account page is now complete!</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/account-page-final.png\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/account-page-final.png\" alt=\"account page final\" width=\"993\" height=\"574\" class=\"alignnone size-full wp-image-3690 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/account-page-final.png 993w, https://www.tetchi.ca/wp-content/uploads/2013/08/account-page-final-300x173.png 300w\" sizes=\"(max-width: 993px) 100vw, 993px\" /></a></p>\n<h2 class=\"step\">3. Set up order.liquid</h2>\n<p>The order.liquid template is where the details of a single order are displayed. To see this template, click on one of the order links from account.liquid.</p>\n<p>We&#8217;re going to split up the template into two columns, like we did with account.liquid in Step 2.  We can do this by re-using the same markup. Open order.liquid and replace its contents with the following:</p>\n<pre>\n<code>{% layout settings.customer_layout %}\n\n&lt;h2&gt;Order {{ order.name }}&lt;/h2&gt;\n\n&lt;div class=\"clearfix\"&gt;\n  &lt;div class=\"account-user left\"&gt;\n  &lt;/div&gt;\n  &lt;div class=\"account-table right\"&gt;\n  &lt;/div&gt;\n&lt;/div&gt;</code>\n</pre>\n<p>We&#8217;re going to output the order details in the left-hand column. Again we&#8217;re going to use the <a href=\"http://docs.shopify.com/themes/liquid-variables/order\">Order</a> object to do this. Paste the code in red below:</p>\n<pre>\n<code>&lt;div class=\"clearfix\"&gt;\n  &lt;div class=\"account-user left\"&gt;\n\n    <span style=\"color:red;\">{% if order.cancelled %}\n    &lt;div id=\"order-cancelled\" class=\"flash notice\"&gt;\n      &lt;h5 id=\"order-cancelled-title\"&gt;Order Cancelled&lt;/h5&gt;\n      <span>on {{ order.cancelled_at | date: \"%B %d, %Y %I:%M%p\" }}</span>\n      <span class=\"errors\">{{ order.cancel_reason }}</span>\n    &lt;/div&gt;\n    {% endif %}\n\n    &lt;div class=\"order-date\"&gt;Placed on {{ order.created_at | date: \"%B %d, %Y %I:%M%p\" }}&lt;/div&gt;\n\n    &lt;div class=\"order-address\"&gt;\n      &lt;div class=\"order-payment\"&gt;\n        &lt;h3&gt;Billing Address&lt;/h3&gt;\n        &lt;p class=\"status\"&gt;Payment Status: <span class=\"status-{{ order.financial_status }}\">{{ order.financial_status }}</span>&lt;/p&gt;\n        &lt;div class=\"address \"&gt;\n          {{ order.billing_address.name }}\n          {{ order.billing_address.company }}\n          {{ order.billing_address.street }}\n          {{ order.billing_address.city }}, {{ order.billing_address.province }}\n          {{ order.billing_address.country }} {{ order.billing_address.zip }}\n          {{ order.billing_address.phone }}\n        &lt;/div&gt;\n      &lt;/div&gt;\n      {% if order.shipping_address %}\n      &lt;div class=\"order-shipping\"&gt;\n        &lt;h3&gt;Shipping Address&lt;/h3&gt;\n        &lt;p class=\"status\"&gt;Fulfillment Status: <span class=\"status-{{ order.fulfillment_status }}\">{{ order.fulfillment_status }}</span>&lt;/p&gt;\n        &lt;div class=\"address\"&gt;\n          {{ order.shipping_address.name }}\n          {{ order.shipping_address.company }}\n          {{ order.shipping_address.street }}\n          {{ order.shipping_address.city }}, {{ order.shipping_address.province }}\n          {{ order.shipping_address.country }} {{ order.shipping_address.zip }}\n          {{ order.shipping_address.phone }}\n        &lt;/div&gt;\n      &lt;/div&gt;\n      {% endif %}\n    &lt;/div&gt;</span>\n  &lt;/div&gt;</code>\n</pre>\n<p>You will now see some order details in the left column.</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/order_left.jpg\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/order_left.jpg\" alt=\"order_left\" width=\"1011\" height=\"833\" class=\"alignnone size-full wp-image-3694 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/order_left.jpg 1011w, https://www.tetchi.ca/wp-content/uploads/2013/08/order_left-300x247.jpg 300w\" sizes=\"(max-width: 1011px) 100vw, 1011px\" /></a></p>\n<div class=\"sub\">Figure 13.3: Outputting the order details in the left-hand column</div>\n<p>Next we&#8217;ll output the products that the customer ordered on the right-hand side. We&#8217;ll do this by using the <a href=\"http://docs.shopify.com/themes/liquid-variables/order#line-item\">Line Item</a> object, the same one that&#8217;s used on the cart page and email templates.</p>\n<p>Add the code in red below:</p>\n<pre>\n<code>...\n&lt;div class=\"account-table right\"&gt;\n    <span style=\"color:red;\">&lt;table&gt;\n      &lt;thead&gt;\n        &lt;tr class=\"cart-headers\"&gt;\n          &lt;th&gt;Product&lt;/th&gt;\n          &lt;th&gt;SKU&lt;/th&gt;          \n          &lt;th&gt;Price&lt;/th&gt;          \n          &lt;th&gt;Quantity&lt;/th&gt;\n          &lt;th class=\"order-total\"&gt;Total&lt;/th&gt;\n        &lt;/tr&gt;\n      &lt;/thead&gt;\n      \n      &lt;tbody&gt;\n        {% for line_item in order.line_items %}\n        &lt;tr id=\"{{ line_item.id }}\" {% if forloop.last %}class=\"last-row\"{% endif %}&gt;\n          &lt;td class=\"order-product\"&gt;\n            {{ line_item.title | link_to: line_item.product.url }} \n            {% if line_item.fulfillment %}\n              Fulfilled {{ line_item.fulfillment.created_at | date: \"%b %d\" }}\n              {% if line_item.fulfillment.tracking_number %}\n              &lt;a href=\"{{ line_item.fulfillment.tracking_url }}\"&gt;{{ line_item.fulfillment.tracking_company }} #{{ line_item.fulfillment.tracking_number}}&lt;/a&gt;\n              {% endif %}\n            {% endif %}\n          &lt;/td&gt;\n          &lt;td class=\"sku\"&gt;{{ line_item.sku }}&lt;/td&gt;\n          \n          &lt;td class=\"order-money\"&gt;{{ line_item.price | money }}&lt;/td&gt;\n          &lt;td class=\"order-quantity\"&gt;{{ line_item.quantity }}&lt;/td&gt;\n          &lt;td class=\"order-total\"&gt;{{ line_item.quantity | times: line_item.price | money }}&lt;/td&gt;\n        &lt;/tr&gt;\n        {% endfor %}\n      &lt;/tbody&gt;  \n      \n      &lt;tfoot&gt;\n        &lt;tr class=\"order_summary \"&gt;\n          &lt;td class=\"label\" colspan=\"4\"&gt;Subtotal:&lt;/td&gt;\n          &lt;td class=\"total money\"&gt;{{ order.subtotal_price | money }}&lt;/td&gt;\n        &lt;/tr&gt;   \n\n        {% for discount in order.discounts %}\n        &lt;tr class=\"order_summary discount\"&gt;\n          &lt;td class=\"label\" colspan=\"4\"&gt;{{ discount.code }} Discount:&lt;/td&gt;\n          &lt;td class=\"total money\"&gt;{{ discount.savings | money }}&lt;/td&gt;\n        &lt;/tr&gt;\n        {% endfor %}\n\n        {% for shipping_method in order.shipping_methods %}\n        &lt;tr class=\"order_summary \"&gt;\n          &lt;td class=\"label\" colspan=\"4\"&gt;Shipping ({{ shipping_method.title }}):&lt;/td&gt;\n          &lt;td class=\"total money\"&gt;{{ shipping_method.price | money }}&lt;/td&gt;\n        &lt;/tr&gt;\n        {% endfor %}\n\n        {% for tax_line in order.tax_lines %}\n        &lt;tr class=\"order_summary \"&gt;\n          &lt;td class=\"label\" colspan=\"4\"&gt;Tax ({{ tax_line.title }} {{ tax_line.rate | times: 100 }}%):&lt;/td&gt;\n          &lt;td class=\"total money\"&gt;{{ tax_line.price | money }}&lt;/td&gt;\n        &lt;/tr&gt;\n        {% endfor %}    \n\n        &lt;tr class=\"order_summary order_total\"&gt;\n          &lt;td class=\"label\" colspan=\"4\"&gt;Total:&lt;/td&gt;\n          &lt;td&gt;&lt;strong&gt;{{ order.total_price | money }} {{ order.currency }}&lt;/strong&gt;&lt;/td&gt;\n        &lt;/tr&gt;   \n      &lt;/tfoot&gt;  \n    &lt;/table&gt;\n    &lt;p class=\"return\"&gt;&lt;a href=\"/account\"&gt;&amp;larr; Return to account page&lt;/a&gt;&lt;/p&gt;</span>\n\n  &lt;/div&gt;\n&lt;/div&gt;</code>\n</pre>\n<p>Let&#8217;s add a bit of CSS to line things up. Open style.css, and insert the code in red at the very bottom of the file:</p>\n<pre>\n<code>...\n.account-table tbody, .last-row td, .account-user .status{padding-bottom:15px;}\n.account-table tfoot{text-align:right; border-top:1px solid #ccc;}\n.cart-headers{border-bottom:1px solid #ccc;}\n\n<span style=\"color:red;\">.order-total{text-align:right;}\n.return{border-top:1px solid #ccc; padding-top:15px;}</span></code>\n</pre>\n<p>Your order.liquid template is now complete!</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/order_right.jpg\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/order_right.jpg\" alt=\"order_right\" width=\"1013\" height=\"843\" class=\"alignnone size-full wp-image-3695 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/order_right.jpg 1013w, https://www.tetchi.ca/wp-content/uploads/2013/08/order_right-300x249.jpg 300w\" sizes=\"(max-width: 1013px) 100vw, 1013px\" /></a></p>\n<h2 class=\"step\">4. Set up addresses.liquid</h2>\n<p>The addresses.liquid template is where the customer can view and modify all of the addresses he/she has entered, as well as add new ones. To access the addresses.liquid template, click the &#8220;View Addresses&#8221; link in account.liquid.</p>\n<h3>4.1. Make sure your theme.liquid file contains &#8220;shopify_common.js&#8221;</h3>\n<p>In earlier versions of <a href=\"https://www.tetchi.ca/shopify-theme-from-scratch-part-1/\">Part 1: theme.liquid</a>, I had forgotten to include &#8220;shopify_common.js&#8221; in Step 2 as one of the required scripts. If you&#8217;re an earlier follower to this series, you may not have &#8220;shopify_common.js&#8221; in your theme.liquid file. Please take a second to go back to theme.liquid and ensure &#8220;shopify_common.js&#8221; is being loaded. Sorry for the confusion! Continuing on&#8230;</p>\n<h3>4.2. Set up the Add Address form</h3>\n<p>We&#8217;ll start off by adding a form that customers can use to add new addresses. This form will be hidden by default and we&#8217;re going to make a button toggle it on and off.</p>\n<p>Open addresses.liquid and replace its contents with the following code:</p>\n<pre>\n<code>{% layout settings.customer_layout %}\n\n&lt;h2&gt;Manage Account Address&lt;/h2&gt;\n\n&lt;input type=\"submit\" class=\"btn\" onclick=\"Shopify.CustomerAddress.toggleNewForm(); return false;\" value=\"Add New Address\"/&gt;\n\n&lt;!--Add Address Form --&gt;\n&lt;div class=\"add-address-wrapper\"&gt;\n  &lt;div id=\"add_address\" style=\"display:none;\"&gt;\n    {% form 'customer_address', customer.new_address %}\n    &lt;h3&gt;Add a new address&lt;/h3&gt;\n    &lt;table class=\"customer-address-table\"&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_first_name_new\"&gt;First Name&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" id=\"address_first_name_new\" class=\"address_form\" name=\"address[first_name]\" value=\"{{form.first_name}}\" size=\"40\" /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_last_name_new\"&gt;Last Name&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" id=\"address_last_name_new\" class=\"address_form\" name=\"address[last_name]\" value=\"{{form.last_name}}\" size=\"40\" /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_company_new\"&gt;Company&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" for=\"address_company_new\" class=\"address_form\" name=\"address[company]\" value=\"{{form.company}}\" size=\"40\" /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_address1_new\"&gt;Address1&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" id=\"address_address1_new\" class=\"address_form\" name=\"address[address1]\" value=\"{{form.address1}}\" size=\"40\" /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_address2_new\"&gt;Address2&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" id=\"address_address2_new\" class=\"address_form\" name=\"address[address2]\" value=\"{{form.address2}}\" size=\"40\" /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_city_new\"&gt;City&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" id=\"address_city_new\" class=\"address_form\" name=\"address[city]\" value=\"{{form.city}}\" size=\"40\" /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_country_new\"&gt;Country&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;\n          &lt;select id=\"address_country_new\" name=\"address[country]\" data-default=\"{{form.country}}\"&gt;{{ country_option_tags }}&lt;/select&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr id=\"address_province_container_new\" style=\"display:none\" class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_province_new\"&gt;Province&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;\n          &lt;select id=\"address_province_new\" class=\"address_form\" name=\"address[province]\" data-default=\"{{form.province}}\"&gt;&lt;/select&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_zip_new\"&gt;Zip&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" id=\"address_zip_new\" class=\"address_form\" name=\"address[zip]\" value=\"{{form.zip}}\" size=\"40\" /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;label for=\"address_phone_new\"&gt;Phone&lt;/label&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;input type=\"text\" id=\"address_phone_new\" class=\"address_form\" name=\"address[phone]\" value=\"{{form.phone}}\" size=\"40\" /&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;tr class=\"form-row\"&gt;\n        &lt;td&gt;&lt;/td&gt;\n        &lt;td&gt;{{ form.set_as_default_checkbox }} Set as Default Address?&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;/table&gt;\n    &lt;div class=\"update-address\"&gt;\n      &lt;input class=\"btn\" type=\"submit\" value=\"Add Address\" /&gt;\n      &lt;span class=\"note\"&gt; or &lt;a href=\"#\" onclick=\"Shopify.CustomerAddress.toggleNewForm(); return false;\"&gt;Cancel&lt;/a&gt;&lt;/span&gt;\n    &lt;/div&gt;\n    {% endform %}\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- End Add Address Form --&gt;</code>\n</pre>\n<p>Now, you should see a button that, when clicked, presents a nice form for entering a new address.</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/add-new-address.jpg\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/add-new-address.jpg\" alt=\"add new address\" width=\"1035\" height=\"900\" class=\"alignnone size-full wp-image-3699 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/add-new-address.jpg 1035w, https://www.tetchi.ca/wp-content/uploads/2013/08/add-new-address-300x260.jpg 300w, https://www.tetchi.ca/wp-content/uploads/2013/08/add-new-address-1024x890.jpg 1024w\" sizes=\"(max-width: 1035px) 100vw, 1035px\" /></a></p>\n<div class=\"sub\">Figure 13.4: The add address form in address.liquid</div>\n<h3>4.3. Add some Javascript for outputting regions</h3>\n<p>You&#8217;ll notice that when you select a country, you&#8217;re not presented with any options for a province/state/region. What we need to do is add some Javascript for enabling this. At the bottom of addresses.liquid, add the following script in red:</p>\n<pre>\n<code>  &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- End Add Address Form --&gt;\n\n<span style=\"color:red;\">&lt;script type=\"text/javascript\" charset=\"utf-8\"&gt;\n// initialize observers on address selectors\nnew Shopify.CountryProvinceSelector('address_country_new', 'address_province_new', {hideElement: 'address_province_container_new'});  \n{% for address in customer.addresses %}\nnew Shopify.CountryProvinceSelector('address_country_{{address.id}}', 'address_province_{{address.id}}', {hideElement: 'address_province_container_{{address.id}}'});\n{% endfor %}\n&lt;/script&gt;</span></code>\n</pre>\n<p>Now when you select a country, some Javascript will kick in to show an additional dropdown for selecting regions for the selected country.</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/province.jpg\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/province.jpg\" alt=\"province\" width=\"1056\" height=\"376\" class=\"alignnone size-full wp-image-3700 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/province.jpg 1056w, https://www.tetchi.ca/wp-content/uploads/2013/08/province-300x106.jpg 300w, https://www.tetchi.ca/wp-content/uploads/2013/08/province-1024x364.jpg 1024w\" sizes=\"(max-width: 1056px) 100vw, 1056px\" /></a></p>\n<div class=\"sub\">Figure 13.5: when you select a Country, a dropdown containing regions of that country is displayed.</div>\n<h3>4.4. Output all of the customer&#8217;s addresses</h3>\n<p>Next we&#8217;re going to loop through the addresses array that is part of the <a href=\"http://docs.shopify.com/themes/liquid-variables/customer\">Customer</a> object to output each address that the customer has added. For each address, we&#8217;re going to output a link for editing and removing the address, as well as a hidden form used for editing the address.</p>\n<p>Right below the add address form, add the code in red below:</p>\n<pre>\n<code>...\n    {% endform %}\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- End Add Address Form --&gt;\n\n<cite style=\"color:red;\">&lt;!-- Customer Addresses --&gt;\n&lt;div id=\"address_tables\"&gt;  \n  {% paginate customer.addresses by 10 %}\n  {% for address in customer.addresses %}\n  &lt;div class=\"user-address {% if forloop.last %}last-address{% endif %}\"&gt;\n    &lt;div id=\"view_address_{{address.id}}\" class=\"customer_address\"&gt;\n\n      &lt;div class=\"clearfix\"&gt;\n        &lt;h3 class=\"left\"&gt;\n          {{ address.street }} \n          {% if address == customer.default_address %}&lt;span class=\"default_address note\"&gt;(Default Address)&lt;/span&gt;{% endif %}\n        &lt;/h3&gt;\n        &lt;p class=\"right address_actions\"&gt;\n          &lt;span class=\"action_link action_edit\"&gt;{{ \"Edit\" | edit_customer_address_link: address.id }}&lt;/span&gt; or \n          &lt;span class=\"action_link action_delete\"&gt;{{ \"Delete\" | delete_customer_address_link: address.id }}&lt;/span&gt;\n        &lt;/p&gt;\n      &lt;/div&gt;\n      &lt;div class=\"view_address\"&gt;\n        {{ address.first_name }} {{address.last_name }}\n        {{ address.company }}\n        {{ address.street }}\n        {{ address.city }} {% if address.province_code %}, {{ address.province_code }}{% endif %}\n        {{ address.country }} {{ address.zip }}\n        {{ address.phone }}\n      &lt;/div&gt;\n    &lt;/div&gt;    \n    &lt;div id=\"edit_address_{{address.id}}\" class=\"customer-address-table\" style=\"display:none;\"&gt;\n      &lt;!-- Edit Address Form --&gt;\n      {% form 'customer_address', address %}\n      &lt;table class=\"customer_address_table\"&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_first_name_{{form.id}}\"&gt;First Name&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;input type=\"text\" id=\"address_first_name_{{form.id}}\" class=\"address_form\" name=\"address[first_name]\" value=\"{{form.first_name}}\" size=\"40\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_last_name_{{form.id}}\"&gt;Last Name&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;input type=\"text\" id=\"address_last_name_{{form.id}}\" class=\"address_form\" name=\"address[last_name]\" value=\"{{form.last_name}}\" size=\"40\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_company_{{form.id}}\"&gt;Company&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;input type=\"text\" id=\"address_company_{{form.id}}\" class=\"address_form\" name=\"address[company]\" value=\"{{form.company}}\" size=\"40\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_address1_{{form.id}}\"&gt;Address1&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;input type=\"text\" id=\"address_address1_{{form.id}}\" class=\"address_form\" name=\"address[address1]\" value=\"{{form.address1}}\" size=\"40\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_address2_{{form.id}}\"&gt;Address2&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;input type=\"text\" id=\"address_address2_{{form.id}}\" class=\"address_form\" name=\"address[address2]\" value=\"{{form.address2}}\" size=\"40\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_city_{{form.id}}\"&gt;City&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;input type=\"text\" id=\"address_city_{{form.id}}\" class=\"address_form\" name=\"address[city]\" value=\"{{form.city}}\" size=\"40\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_country_{{form.id}}\"&gt;Country&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;\n            &lt;select id=\"address_country_{{form.id}}\" name=\"address[country]\" data-default=\"{{form.country}}\"&gt;{{ country_option_tags }}&lt;/select&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr id=\"address_province_container_{{form.id}}\" style=\"display:none\" class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_province_{{form.id}}\"&gt;Province&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;select id=\"address_province_{{form.id}}\" class=\"address_form\" name=\"address[province]\" data-default=\"{{form.province}}\"&gt;&lt;/select&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_zip_{{form.id}}\"&gt;Zip&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;input type=\"text\" id=\"address_zip_{{form.id}}\" class=\"address_form\" name=\"address[zip]\" value=\"{{form.zip}}\" size=\"40\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;label for=\"address_phone_{{form.id}}\"&gt;Phone&lt;/label&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;input type=\"text\" id=\"address_phone_{{form.id}}\" class=\"address_form\" name=\"address[phone]\" value=\"{{form.phone}}\" size=\"40\" /&gt;&lt;/td&gt;\n        &lt;/tr&gt;      \n        &lt;tr class=\"form-row\"&gt;\n          &lt;td&gt;&lt;/td&gt;\n          &lt;td&gt;{{ form.set_as_default_checkbox }} Set as Default Address?&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/table&gt;\n      &lt;div class=\"update-address\"&gt;\n        &lt;input class=\"btn\" type=\"submit\" value=\"Update Address\" /&gt;\n        &lt;span class=\"note\"&gt; or &lt;a href=\"#\" onclick=\"Shopify.CustomerAddress.toggleForm({{form.id}}); return false;\"&gt;Cancel&lt;/a&gt;&lt;/span&gt;\n      &lt;/div&gt;        \n      {% endform %}\n      &lt;!-- End Edit Address Form --&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  {% endfor %}\n\n  &lt;div id=\"address_pagination\"&gt;{{ paginate | default_pagination }}&lt;/div&gt;  \n  {% endpaginate %}\n\n  &lt;p class=\"return\"&gt;&lt;a href=\"/account\"&gt;&amp;larr; Return to account page&lt;/a&gt;&lt;/p&gt;\n\n&lt;/div&gt;\n&lt;!-- End Customer Addresses --&gt;</cite>\n\n&lt;script type=\"text/javascript\" charset=\"utf-8\"&gt;\n// initialize observers on address selectors\n...</code>\n</pre>\n<p>You will now see all of the customer&#8217;s addresses output in a list.</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/addresses-list1.jpg\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/addresses-list1.jpg\" alt=\"addresses list\" width=\"1034\" height=\"723\" class=\"alignnone size-full wp-image-3705 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/addresses-list1.jpg 1034w, https://www.tetchi.ca/wp-content/uploads/2013/08/addresses-list1-300x209.jpg 300w, https://www.tetchi.ca/wp-content/uploads/2013/08/addresses-list1-1024x716.jpg 1024w\" sizes=\"(max-width: 1034px) 100vw, 1034px\" /></a></p>\n<div class=\"sub\">Figure 13.6: Customer&#8217;s address list</div>\n<h3>4.5. Add some CSS</h3>\n<p>Finally we&#8217;re going to add some CSS to organize things better. Open style.css and add the following code at the very bottom.</p>\n<pre>\n<code>.add-address-wrapper{margin-bottom:30px; padding-bottom: 30px; border-bottom: 1px solid #ccc;}\n.user-address{margin-bottom:30px; padding-bottom:30px; border-bottom:1px solid #ccc;}\n.user-address p, .user-address h3{margin:0;}\n.last-address{border-bottom:none; padding:0;}\n.update-address{margin-top:15px;}\n.customer-address-table td{padding-top:15px;}</code>\n</pre>\n<p>Your address list should now look like this:</p>\n<p><a href=\"https://www.tetchi.ca/wp-content/uploads/2013/08/addresses_final.jpg\"><img data-src=\"https://www.tetchi.ca/wp-content/uploads/2013/08/addresses_final.jpg\" alt=\"addresses_final\" width=\"1004\" height=\"849\" class=\"alignnone size-full wp-image-3706 lazy-load\" data-srcset=\"https://www.tetchi.ca/wp-content/uploads/2013/08/addresses_final.jpg 1004w, https://www.tetchi.ca/wp-content/uploads/2013/08/addresses_final-300x253.jpg 300w\" sizes=\"(max-width: 1004px) 100vw, 1004px\" /></a></p>\n<h2 class=\"step\">Congrats!</h2>\n<p>&#8230;annnd with that, we&#8217;ve completed all of the liquid templates in a Shopify theme! Great work &#8211; we&#8217;re at the homestretch. We just need to set up some basic Theme Settings, and we are finished.</p>\n<p><a href=\"/shopify-theme-from-scratch/\">&larr; Back to table of contents</a></p>\n"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"shopify-theme-from-scratch-part-13"}}
{"data":{"wordpressPost":{"title":"Shopify Theme from Scratch Part 2: index.liquid","content":"<p><img src=\"https://www.tetchi.ca/wp-content/uploads/2013/05/part2_banner.png\" alt=\"part2_banner\" width=\"800\" height=\"186\" class=\"alignnone size-full wp-image-3068\" /></p>\n<p>The index.liquid template loads the contents of the very first page that the customer sees when they enter the URL of your shop.</p>\n<p>Away we go!</p>\n<p><!--more--></p>\n<h2 class=\"step\">1. Add the contents of the Welcome page</h2>\n<p>The first thing we&#8217;re going to do is load the contents of the default Welcome page inside index.liquid.</p>\n<p><a href=\"http://localhost:8888/wp-content/uploads/2013/05/default-welcome-page.jpg\"><img src=\"http://localhost:8888/wp-content/uploads/2013/05/default-welcome-page.jpg\" alt=\"default welcome page\" width=\"1251\" height=\"891\" class=\"alignnone size-full wp-image-3085\" srcset=\"http://localhost:8888/wp-content/uploads/2013/05/default-welcome-page.jpg 1251w, http://localhost:8888/wp-content/uploads/2013/05/default-welcome-page-300x214.jpg 300w, http://localhost:8888/wp-content/uploads/2013/05/default-welcome-page-768x547.jpg 768w, http://localhost:8888/wp-content/uploads/2013/05/default-welcome-page-1024x729.jpg 1024w\" sizes=\"(max-width: 1251px) 100vw, 1251px\" /></a></p>\n<div class=\"sub\">Figure 2.1: By default, all shops come with a page called &#8220;Welcome&#8221; with the handle &#8220;frontpage&#8221;</div>\n<p>Remove the &#8220;this is my index page!&#8221; text, and insert this line of code:</p>\n<pre>\n<code markup=\"span\">\n{% assign page = pages.frontpage %}\n</code>\n</pre>\n<p>The assign statement tells the index.liquid template &#8220;from now on, every instance of the word &#8216;page&#8217; in Liquid tags should be seen as &#8216;pages.frontpage'&#8221;. In other words, we&#8217;re telling index.liquid to look at a specific page in Blogs &amp; Pages; otherwise it wouldn&#8217;t know which page to load.</p>\n<p><a href=\"http://localhost:8888/wp-content/uploads/2013/05/page-handle.jpg\"><img src=\"http://localhost:8888/wp-content/uploads/2013/05/page-handle.jpg\" alt=\"page handle\" width=\"1032\" height=\"221\" class=\"alignnone size-full wp-image-3087\" srcset=\"http://localhost:8888/wp-content/uploads/2013/05/page-handle.jpg 1032w, http://localhost:8888/wp-content/uploads/2013/05/page-handle-300x64.jpg 300w, http://localhost:8888/wp-content/uploads/2013/05/page-handle-768x164.jpg 768w, http://localhost:8888/wp-content/uploads/2013/05/page-handle-1024x219.jpg 1024w\" sizes=\"(max-width: 1032px) 100vw, 1032px\" /></a></p>\n<div class=\"sub\">Figure 2.2: You can see what a handle of a page is by looking under &#8220;URL and handle&#8221;</div>\n<p>Next we&#8217;re going to add the page&#8217;s title and content. Add the code in red below.</p>\n<pre>\n<code markup=\"span\">\n{% assign page = pages.frontpage %}\n<span style=\"color:red;\"><div class=\"rte index-page\">\n    <h2>{{ page.title }}</h2>\n    {{ page.content }}\n</div></span>\n</code>\n</pre>\n<p>If we didn&#8217;t have the assign statement, our code would look like this:</p>\n<pre>\n<code markup=\"span\">\n<!-- demonstration, do not copy into your theme -->\n<div class=\"rte index-page\">\n    <h2>{{ pages.frontpage.title }}</h2>\n    {{ pages.frontpage.content }}\n</div>\n</code>\n</pre>\n<p>&#8230; and that&#8217;s a lot of extra typing. Not only that, if you decide to change what page is shown on the homepage, you&#8217;d have to change every instance of the handle. If you use an assign statement, you only need to change it once.</p>\n<p><strong>Note:</strong> When you target a page, always use the &#8220;handle&#8221; of the page. You could technically use the title of the page, but it&#8217;s always best to use the handles because <em>handles are always unique</em>. You may get unfavourable results if you use the title, and you happen to have two pages with the title &#8220;Welcome&#8221;. This also applies to products, collections, and anything with handles.</p>\n<p>At this point, you should be seeing the contents of the &#8220;Welcome&#8221; page output on your homepage.</p>\n<p><a href=\"http://localhost:8888/wp-content/uploads/2013/05/part2-progress1.jpg\"><img src=\"http://localhost:8888/wp-content/uploads/2013/05/part2-progress1.jpg\" alt=\"part2 progress1\" width=\"998\" height=\"616\" class=\"alignnone size-full wp-image-3089\" srcset=\"http://localhost:8888/wp-content/uploads/2013/05/part2-progress1.jpg 998w, http://localhost:8888/wp-content/uploads/2013/05/part2-progress1-300x185.jpg 300w, http://localhost:8888/wp-content/uploads/2013/05/part2-progress1-768x474.jpg 768w\" sizes=\"(max-width: 998px) 100vw, 998px\" /></a></p>\n<h2 class=\"step\">2. Display products on the homepage</h2>\n<p>To start, we&#8217;re going to create a snippet that outputs products&#8217; thumbnails. <em>Snippets</em> are bits of code that can be referenced in other templates of a theme. It&#8217;s handy for elements of a theme that is used repeatedly, because you just have to reference the snippet once as opposed to having to type out the code multiple times. They can also be used for organizational purposes (ex: if you have a big chunk of code, you may want to store it in a snippet instead of taking up a bunch of lines in your tempate). Snippets always reside in the &#8220;Snippets&#8221; folder of your Template Editor.</p>\n<p>Later we can use the &#8220;product-loop.liquid&#8221; snippet that we&#8217;ll be creating here on our collection pages to output product thumbnails there. Recycling FTW!</p>\n<h3>How to create a snippet:</h3>\n<p>If you&#8217;re using the Desktop Theme Editor like I am, you can simply create a new file called &#8220;product-loop.liquid&#8221;, and place it in the snippets folder.</p>\n<p><a href=\"http://localhost:8888/wp-content/uploads/2013/05/making-product-loop.jpg\"><img src=\"http://localhost:8888/wp-content/uploads/2013/05/making-product-loop.jpg\" alt=\"making product loop\" width=\"987\" height=\"681\" class=\"alignnone size-full wp-image-3107\" srcset=\"http://localhost:8888/wp-content/uploads/2013/05/making-product-loop.jpg 987w, http://localhost:8888/wp-content/uploads/2013/05/making-product-loop-300x207.jpg 300w, http://localhost:8888/wp-content/uploads/2013/05/making-product-loop-768x530.jpg 768w\" sizes=\"(max-width: 987px) 100vw, 987px\" /></a></p>\n<div class=\"sub\">An exciting picture of me creating a snippet in Textmate</div>\n<p>If you&#8217;re using the Template Editor, simply click the &#8220;Add a new snippet&#8221; link, enter &#8220;product-loop&#8221; for its name, and hit the &#8220;Create Snippet&#8221; button. Refer to Figure 2.3 below if you&#8217;re unsure where that is.</p>\n<p><a href=\"http://localhost:8888/wp-content/uploads/2013/05/adding-a-snippet.jpg\"><img src=\"http://localhost:8888/wp-content/uploads/2013/05/adding-a-snippet.jpg\" alt=\"adding a snippet\" width=\"1061\" height=\"588\" class=\"alignnone size-full wp-image-3108\" srcset=\"http://localhost:8888/wp-content/uploads/2013/05/adding-a-snippet.jpg 1061w, http://localhost:8888/wp-content/uploads/2013/05/adding-a-snippet-300x166.jpg 300w, http://localhost:8888/wp-content/uploads/2013/05/adding-a-snippet-768x426.jpg 768w, http://localhost:8888/wp-content/uploads/2013/05/adding-a-snippet-1024x567.jpg 1024w\" sizes=\"(max-width: 1061px) 100vw, 1061px\" /></a></p>\n<div class=\"sub\">Figure 2.3: Adding a snippet in Shopify&#8217;s Template Editor</div>\n<h3>Putting product-loop.liquid to use</h3>\n<p>Let&#8217;s go ahead and add the code to load the product-loop.liquid snippet. Open index.liquid and add the code in red below.</p>\n<pre>\n<code markup=\"span\">\n{% assign page = pages.frontpage %}\n<div class=\"rte index-page\">\n    <h2>{{ page.title }}</h2>\n    {{ page.content }}\n</div>\n<span style=\"color:red;\">{% assign collection = collections.frontpage %}\n<div class=\"index-collection clearfix\">\n  <h2>{{ collection.title }}</h2>\n    {% for product in collection.products | limit:8 %}\n      {% include 'product-loop' %}\n    {% endfor %}\n</div></span>\n</code>\n</pre>\n<p>Now, this won&#8217;t actually output anything yet except for the collection title, because our product-loop.liquid snippet is still blank. What we&#8217;re doing above is we&#8217;re first assigning &#8220;collection&#8221; to be &#8220;collections.frontpage&#8221;, much like we did with the Welcome page in step 1. The Frontpage collection is a default collection that comes with every shop, and in Part 1 we added products to it (you should have 9 products in the Frontpage collection now).</p>\n<p>After that, we do a for-loop to go through each product in the Frontpage collection and outputting the product-loop snippet for every product in it. There is also a &#8220;limit&#8221; filter with a value of 8 so that we only show the first 8 products in the Frontpage collection. I put that in there because I wanted there to be an even 4 products per row.</p>\n<h3>Build the product-loop snippet</h3>\n<p>Open the &#8220;product-loop.liquid&#8221; snippet. Let&#8217;s start off by adding the following code:</p>\n<pre>\n<code markup=\"span\">\n<div class=\"product left {% cycle '','','','last' %}\">\n</div>\n</code>\n</pre>\n<p>This will be the div that wraps each of our products. The cycle tag is a cool feature that you can use inside for-loops that lets you output something every n-th iteration of a forloop. More info on the cycle tag  can be found <a href=\"http://wiki.shopify.com/Logic#Cycle\">here</a>. In this instance, I&#8217;m going to be applying a CSS class called &#8220;last&#8221; for every fourth product so that I can target the last product in every row. Then, I&#8217;m going to use the &#8220;last&#8221; class to apply some special styles to it later.</p>\n<p>Let&#8217;s go ahead and add the code for the product image, title, and price. Insert the code in red below:</p>\n<pre>\n<code markup=\"span\">\n<div class=\"product left {% cycle '','','','last' %}\">\n  <span style=\"color:red;\"><div class=\"product-thumb\">\n    <a href=\"{{ product.url | within: collection }}\">\n      <img src=\"{{ product.featured_image.src | product_img_url: 'medium' }}\" alt=\"{{ product.featured_image.alt | escape }}\" />\n    </a>\n  </div>\n  <div class=\"product-title\">\n    <a href=\"{{ product.url | within: collection }}\">\n        {{ product.title }}\n      </a>\n  </div>\n  <div class=\"product-price\">\n    {% if product.price_varies %}From{% endif %}\n    {{ product.price | money }}\n  </div></span>\n</div>\n</code>\n</pre>\n<p>Essentially here I am using the variables available in the <a href=\"http://wiki.shopify.com/Product\">product</a> object and outputting them accordingly.</p>\n<h3>Pretty it up with CSS</h3>\n<p>Open style.css. At the bottom, add the following CSS:</p>\n<pre>\n<code markup=\"span\">\n\n/**** product-loop.liquid ****/\n\n.product{margin:0 20px 30px 0; width:225px; text-align:center; font-weight:bold;}\n.product-thumb{border:1px solid #ccc; padding:10px;}\n.product-thumb img{max-width:100%; height: auto;}\n.product-title{ margin-top:10px;}\n.product-price{font-size:14px;}\n</code>\n</pre>\n<p>This will make the product-loop snippet look nicer, but notice that the product thumbnails are currently stacked on top of each other.</p>\n<p><a href=\"http://localhost:8888/wp-content/uploads/2013/05/stacked-images.jpg\"><img src=\"http://localhost:8888/wp-content/uploads/2013/05/stacked-images.jpg\" alt=\"stacked images\" width=\"802\" height=\"786\" class=\"alignnone size-full wp-image-3114\" srcset=\"http://localhost:8888/wp-content/uploads/2013/05/stacked-images.jpg 802w, http://localhost:8888/wp-content/uploads/2013/05/stacked-images-300x294.jpg 300w, http://localhost:8888/wp-content/uploads/2013/05/stacked-images-768x753.jpg 768w\" sizes=\"(max-width: 802px) 100vw, 802px\" /></a></p>\n<div class=\"sub\">Figure 2.4: The products are not being floated, so they will stack on top of each other.</div>\n<p>We&#8217;re going to to fix this up by &#8220;floating&#8221; the thumbnails to each other. Still inside style.css, scroll up to the global.css section and insert the following CSS code in red. We&#8217;re going to add some classes for floating elements, as well as a class called &#8216;clearfix&#8217;.</p>\n<pre>\n<code markup=\"span\">\n/**** global css ****/\n\nbody{font-family:Arial, Helvetica, sans-serif;}\na {text-decoration:none; color:#5fa6d8;}\na:hover{color:#84ddf2;}\np{line-height:1.45em;}\n\n<span style=\"color:red;\">.left{float: left;}\n.right{float: right;}\n.last{margin-right:0px !important;}\n\n/* Contain floats: nicolasgallagher.com/micro-clearfix-hack/ */ \n.clearfix:before, .clearfix:after { content: \"\"; display: table; }\n.clearfix:after { clear: both; }\n.clearfix { zoom: 1; }</span>\n\n/**** theme.liquid ****/\n\n.container{width: 960px; margin: 0 auto;}\n...\n</code>\n</pre>\n<p>Clearfix is a technique used to &#8220;clear&#8221; elements on a page. I won&#8217;t go too far into the details, but when you&#8217;re laying things out with CSS, you typically &#8220;float&#8221; elements left or right. When you float elements, you need to &#8220;clear&#8221; them afterwards.</p>\n<p>If you don&#8217;t clear elements that are being floated, you&#8217;re gonna have a bad time. Your layout will likely break.</p>\n<p><a href=\"http://localhost:8888/wp-content/uploads/2013/05/bad-time.jpg\"><img src=\"http://localhost:8888/wp-content/uploads/2013/05/bad-time.jpg\" alt=\"bad time\" width=\"1154\" height=\"832\" class=\"alignnone size-full wp-image-3117\" srcset=\"http://localhost:8888/wp-content/uploads/2013/05/bad-time.jpg 1154w, http://localhost:8888/wp-content/uploads/2013/05/bad-time-300x216.jpg 300w, http://localhost:8888/wp-content/uploads/2013/05/bad-time-768x554.jpg 768w, http://localhost:8888/wp-content/uploads/2013/05/bad-time-1024x738.jpg 1024w\" sizes=\"(max-width: 1154px) 100vw, 1154px\" /></a></p>\n<div class=\"sub\">Figure 2.5: The product-loop sans clearfix. Notice how the footer is collapsing in to the product-loop.</div>\n<p>Your index page should look like this now:</p>\n<p><a href=\"http://localhost:8888/wp-content/uploads/2013/05/part2-progress2.jpg\"><img src=\"http://localhost:8888/wp-content/uploads/2013/05/part2-progress2.jpg\" alt=\"part2 progress2\" width=\"1027\" height=\"988\" class=\"alignnone size-full wp-image-3119\" srcset=\"http://localhost:8888/wp-content/uploads/2013/05/part2-progress2.jpg 1027w, http://localhost:8888/wp-content/uploads/2013/05/part2-progress2-300x289.jpg 300w, http://localhost:8888/wp-content/uploads/2013/05/part2-progress2-768x739.jpg 768w, http://localhost:8888/wp-content/uploads/2013/05/part2-progress2-1024x985.jpg 1024w\" sizes=\"(max-width: 1027px) 100vw, 1027px\" /></a></p>\n<p>That&#8217;s all for today 🙂</p>\n<p><a href=\"/shopify-theme-from-scratch/\">&larr; Back to table of contents</a></p>\n","wordpress_id":3057},"allWordpressWpComments":{"edges":[{"node":{"content":"<p>Followed this to the letter so far but my homepage products wont display on two rows of 4. Its showing as two rows of three and one row of two. I get this error prompt on my index.liquid screen:</p>\n<p>The following were flagged as potential issues in this file:<br />\nLine 9 — Liquid syntax error: Expected end_of_string but found pipe in &#8220;product in collection.products | limit:8&#8221;<br />\nThese issues may not affect your theme, but should be reviewed if you notice any problems.<br />\nNote: This message is only shown in development shops.</p>\n<p>Any help?</p>\n","author_name":"Jonny"}},{"node":{"content":"<p>Fixed it. </p>\n<p>It looks like Shopify renamed my style.css and normalize.css files to have the .liquid ending. I renamed the file on my computer to have the .liquid ending and everything snapped into shape!</p>\n","author_name":"Carl"}},{"node":{"content":"<p>Thank you so much for this tutorial! I&#8217;m learning a lot. </p>\n<p>One problem though&#8230; I&#8217;m not able to get the the thumbnails to &#8220;float&#8221; next to each other. I pasted the code to no change on my page ( the thumbnails are still stacked on top of each other ). Is there something new that needs to be done? My code is exactly the same as yours.</p>\n","author_name":"Carl"}},{"node":{"content":"<p>Tetchi, </p>\n<p>Thanks for the great resource! Very helpful!</p>\n<p>Could you clarify which CSS classes are necessary and which aren&#8217;t? For instance, the .rte class I believe is generally for rich text input from the user. However, I didn&#8217;t see any .rte class in the css files for this template. Is there some other reason for including it (e.g. they are accessed by the Shopify scripts)? There are other CSS classes here that present the same question like index-page and index-collection. Could you please clarify?</p>\n<p>Also, generally, are there any CSS classes that are absolutely required for Shopify to work properly?</p>\n","author_name":"John"}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"shopify-theme-from-scratch-part-2","wordpressId":3057}}
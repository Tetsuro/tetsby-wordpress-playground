<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/tetsby-wordpress-playground/styles.6ca752c1e8ff717a1995.css">.MainMenu-module--MainMenu--2Y-42{text-align:center;padding:10px;display:flex;justify-content:space-evenly;max-width:600px;margin:0 auto 40px;font-weight:700}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{padding:0;margin:0 1.45rem 1.45rem}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:none;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.PostFooterLinks-module--PostFooterLinks--BWXa6{text-align:center;border-top:1px solid #ddd;padding:20px 0}.PostFooterLinks-module--PostFooterLinks--BWXa6 a~a{margin-left:20px}.PostList-module--PostList--2HMVY{display:flex;align-items:center;margin:0 0 20px}.PostList-module--PostListThumbnail--1KIQC{display:block;width:150px;margin-right:20px;margin-bottom:0}.PostList-module--Pagination--2Z2AY{text-align:center}.PostList-module--Pagination--2Z2AY a~a{margin-left:20px}</style><meta name="generator" content="Gatsby 2.3.31"/><title data-react-helmet="true">Shopify Theme from Scratch Part 6: cart.liquid | Tetchi x Wordpress</title><meta data-react-helmet="true" name="description" content="Playing around with WP and Gatsby"/><meta data-react-helmet="true" property="og:title" content="Shopify Theme from Scratch Part 6: cart.liquid"/><meta data-react-helmet="true" property="og:description" content="Playing around with WP and Gatsby"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="@tetchi"/><meta data-react-helmet="true" name="twitter:title" content="Shopify Theme from Scratch Part 6: cart.liquid"/><meta data-react-helmet="true" name="twitter:description" content="Playing around with WP and Gatsby"/><meta data-react-helmet="true" name="robots" content="noindex"/><meta data-react-helmet="true" name="keywords" content="gatsby, application, react"/><link rel="shortcut icon" href="/tetsby-wordpress-playground/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="manifest" href="/tetsby-wordpress-playground/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/tetsby-wordpress-playground/icons/icon-48x48.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="72x72" href="/tetsby-wordpress-playground/icons/icon-72x72.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="96x96" href="/tetsby-wordpress-playground/icons/icon-96x96.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="144x144" href="/tetsby-wordpress-playground/icons/icon-144x144.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="192x192" href="/tetsby-wordpress-playground/icons/icon-192x192.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="256x256" href="/tetsby-wordpress-playground/icons/icon-256x256.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="384x384" href="/tetsby-wordpress-playground/icons/icon-384x384.png?v=008654519ce705ac7bc44303a9014606"/><link rel="apple-touch-icon" sizes="512x512" href="/tetsby-wordpress-playground/icons/icon-512x512.png?v=008654519ce705ac7bc44303a9014606"/><link as="script" rel="preload" href="/tetsby-wordpress-playground/1-26e717f79cfd26ce2270.js"/><link as="script" rel="preload" href="/tetsby-wordpress-playground/component---src-templates-post-jsx-da4ff8f6c3977c2b12a2.js"/><link as="script" rel="preload" href="/tetsby-wordpress-playground/app-29dbb03a1d74b2ce9374.js"/><link as="script" rel="preload" href="/tetsby-wordpress-playground/styles-85e817822b382b3bf7ba.js"/><link as="script" rel="preload" href="/tetsby-wordpress-playground/webpack-runtime-ef98225fa2bd5c39df9f.js"/><link as="fetch" rel="preload" href="/tetsby-wordpress-playground/static/d/337/path---shopify-theme-from-scratch-part-6-f-5-d-437-SIWQkhKXSpU7k84JryXSKcNSTcw.json" crossorigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header style="background:rebeccapurple"><div style="margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem"><h1 style="margin:0;text-align:center"><a style="color:white;text-decoration:none" href="/tetsby-wordpress-playground/">Tetchi x Wordpress</a></h1></div></header><nav class="MainMenu-module--MainMenu--2Y-42"><a href="/tetsby-wordpress-playground/">Home</a><a href="/tetsby-wordpress-playground/works">Works</a><a href="/tetsby-wordpress-playground/about-me">About Me</a></nav><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0"><main><h1>Shopify Theme from Scratch Part 6: cart.liquid</h1><div><html><head></head><body><p>				<img src="https://www.tetchi.ca/wp-content/uploads/2013/05/part6_banner.png" alt="part6_banner" width="800" height="186" class="alignnone size-full wp-image-3276" srcset="https://www.tetchi.ca/wp-content/uploads/2013/05/part6_banner.png 800w, https://www.tetchi.ca/wp-content/uploads/2013/05/part6_banner-300x70.png 300w, https://www.tetchi.ca/wp-content/uploads/2013/05/part6_banner-768x179.png 768w" sizes="(max-width: 800px) 100vw, 800px"></p>
<p>The cart page is where a list of all the products that a customer has added to the cart is displayed. Usually the products are displayed in a tabular format.</p>
<p>Let&#x2019;s get started!</p>
<p><!--more--></p>
<h2 class="step">1. Check to see if there&#x2019;s anything in the cart</h2>
<p>The first thing we&#x2019;ll do is write an if-statement to see if there are any items in the cart. To do this we&#x2019;re going to access the &#x2018;cart&#x2019; object, and check its item_count property.</p>
<p>Open cart.liquid, and replace its contents with the code below.</p>
<pre><code markup="span">
<h2>Your Cart</h2>

{% if cart.item_count &gt; 0 %}

{% else %}

You don&apos;t have any items in your cart!

{% endif %}
</code>
</pre>
<h2 class="step">2. Add the markup for the cart table</h2>
<p>Let&#x2019;s start off by adding in the headings in the table. Insert the code in red below:</p>
<pre><code markup="span">
<h2>Your Cart</h2>

{% if cart.item_count &gt; 0 %}

  <span style="color:red;"><form action="/cart" method="post">
  
  <table class="cart-table">
    <thead>
      <tr>
        <th>&#xA0;</th>
        <th>Product Title</th>
        <th>Price
        </th><th>Quantity</th>
        <th>Total</th>
        <th>&#xA0;</th>
        </tr>
      </thead>
    </table>
  </form></span>

  {% else %}

  You don&apos;t have any items in your cart!

  {% endif %}
</code>
</pre>
<p>Next, we&#x2019;re going to do a for loop through the line_items array to output the products that have been added to the cart.</p>
<h3>What is line_items?</h3>
<p>In a nutshell, a line_item is an item that has been added to your cart, or purchased by a customer. The line_item object can be used in places such as the cart template, email order notifications, the Thank You page (Additional Content &amp; Scripts), as well as in apps such as PixelPrinter. You can see the variables of the line_item object <a href="http://wiki.shopify.com/Line_Item">here</a>. What&#x2019;s nice about line_item is that it&#x2019;s aware of what variant of the product was added to cart.</p>
<p>Here, we&#x2019;re going to do a for loop through the line_item objects and output them in rows.</p>
<pre><code markup="span">
<h2>Your Cart</h2>


{% if cart.item_count &gt; 0 %}

  <form action="/cart" method="post">

  <span style="color:red;"></span>
        {% for item in cart.items %}    
        
        {% endfor %}
      <table class="cart-table">
    <thead>
      <tr>
        <th>&#xA0;</th>
        <th>Product Title</th>
        <th>Price
        </th><th>Quantity</th>
        <th>Total</th>
        <th>&#xA0;</th>
      </tr>
    </thead>

    <tbody><tr>
          <td>
            <div class="item-thumb">
              <a href="{{ item.product.url }}">  
                <img src="{{ item.product.featured_image.src | product_img_url: &apos;small&apos; }}" alt="{{ item.title | escape }}">
              </a>
            </div>
          </td>
          <td>
            <div class="item-title">
              <a href="{{ item.product.url | within: collections.all }}">{{ item.title }}</a>
            </div>
          </td>
          <td>{{ item.price | money }}</td>
          <td>
            <input type="number" name="updates[]" id="updates_{{ item.id }}" value="{{ item.quantity }}" class="item-qty">
          </td>
          <td>{{ item.line_price | money }}</td>
          <td>
            <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0">Remove</a>
          </td>
        </tr></tbody>
    </table>     
</form>

{% else %}

You don&apos;t have any items in your cart!

{% endif %}
</code>
</pre>
<p>Let&#x2019;s go ahead and add the buttons for updating the cart and proceeding to checkout. Notice that we&#x2019;re using the &#x2018;btn&#x2019; class that we made in Part 5 to make the buttons look consistent. Also note that the buttons are within the opening &lt;form&gt; and closing &lt;/form&gt; tags. If you&#x2019;re ever working on a theme&#x2019;s cart template and your checkout buttons aren&#x2019;t working for some reason, you should always check to see if the buttons are within the &lt;form&gt; tags.</p>
<pre><code markup="span">

      
    

    <span style="color:red;"><div class="cart-options">
      <h3>Subtotal: {{ cart.total_price | money }}</h3>
      <input type="submit" name="update" value="Update cart" class="btn">
      <span class="or">or</span>
      <input type="submit" name="checkout" value="Check out" class="btn">    
      {% if additional_checkout_buttons %}
      <p class="additional-checkout-buttons">
        {{ content_for_additional_checkout_buttons }}
      </p>
      {% endif %}    
    </div></span>


</code>
</pre>
<p>At this point, if you&#x2019;ve added a product to your cart, your cart template should look like this:</p>
<p><a href="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-template-progress.jpg"><img src="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-template-progress.jpg" alt="cart template progress" width="996" height="710" class="alignnone size-full wp-image-3290" srcset="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-template-progress.jpg 996w, https://www.tetchi.ca/wp-content/uploads/2013/06/cart-template-progress-300x214.jpg 300w, https://www.tetchi.ca/wp-content/uploads/2013/06/cart-template-progress-768x547.jpg 768w" sizes="(max-width: 996px) 100vw, 996px"></a></p>
<div class="sub">Figure 6.1: cart.liquid template so far. We&#x2019;ll add CSS to lay out the table nicer.</div>
<h2 class="step">3. Pretty it up with CSS</h2>
<p>Open style.css, and insert the following at the bottom:</p>
<pre><code markup="span">
/**** cart.liquid ****/

.cart-table{width: 100%;}
.cart-table thead{border-bottom:1px solid #ccc;}
.cart-table th{text-align: left; padding:20px;}
.cart-table td{padding:30px 10px 0 10px; }
.item-thumb{border:1px solid #ccc; padding:20px; width: 100px; height:100px;}
.item-qty{width:90px;}
.cart-options{text-align: right;}
.cart-info{padding:7px 25px 0 0;}
</code>
</pre>
<p>Your cart page should now look like this:</p>
<p><a href="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-page-complete.jpg"><img src="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-page-complete.jpg" alt="cart page complete" width="983" height="818" class="alignnone size-full wp-image-3291" srcset="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-page-complete.jpg 983w, https://www.tetchi.ca/wp-content/uploads/2013/06/cart-page-complete-300x250.jpg 300w, https://www.tetchi.ca/wp-content/uploads/2013/06/cart-page-complete-768x639.jpg 768w" sizes="(max-width: 983px) 100vw, 983px"></a></p>
<div class="sub">Figure 6.2: cart.liquid template after applying some CSS.</div>
<h2 class="step">4. Add a link to the cart page in the toolbar</h2>
<p>Open theme.liquid.</p>
<pre><code markup="span">

  <div class="header-toolbar">
    <div class="container clearfix">
      Tool bar here!
    </div>
  </div>
...
</code>
</pre>
<p>Replace the &#x201C;Tool bar here!&#x201D; text with the following code in red:</p>
<pre><code markup="span">
 <div class="header-toolbar">
    <div class="container clearfix">
          <span style="color:red;"><div class="cart-info right">
            Cart: <a href="/cart">{{ cart.item_count }} {{ cart.item_count | pluralize: &apos;item&apos;, &apos;items&apos; }} ({{ cart.total_price | money }})</a>
          </div></span>
    </div>
  </div>
...
</code>
</pre>
<p>In the code above, we&#x2019;re using the <a href="http://wiki.shopify.com/Cart">cart</a> object to output the number of products the customer has in the cart, as well as the total price of the cart.</p>
<p>Your toolbar should now look like this:</p>
<p><a href="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-link-in-toolbar.jpg"><img src="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-link-in-toolbar.jpg" alt="cart link in toolbar" width="1007" height="620" class="alignnone size-full wp-image-3298" srcset="https://www.tetchi.ca/wp-content/uploads/2013/06/cart-link-in-toolbar.jpg 1007w, https://www.tetchi.ca/wp-content/uploads/2013/06/cart-link-in-toolbar-300x185.jpg 300w, https://www.tetchi.ca/wp-content/uploads/2013/06/cart-link-in-toolbar-768x473.jpg 768w" sizes="(max-width: 1007px) 100vw, 1007px"></a></p>
<div class="sub">Figure 6.3: The toolbar will give quick access to the cart.</div>
<p>That&#x2019;s all for now!</p>
<p><a href="/shopify-theme-from-scratch/">&#x2190; Back to table of contents</a>		</p>
</body></html></div><div><h2>4<!-- --> Comments</h2><div><strong>Stu</strong><p>August 26th, 2014</p><div><p>^^ &#8220;&#8221;</p>
</div></div><div><strong>Stu</strong><p>August 26th, 2014</p><div><p>section 2.</p>
<p>Closing tag for Price, reads  and is highlighted as an error.</p>
<p>Great tutorials so far, thank you&#8230;..looking forward to the next 9 parts. 🙂</p>
</div></div><div><strong>tetchi</strong><p>September 25th, 2013</p><div><p>Where are you seeing the error? Do you have a screenshot or link you can send me?</p>
</div></div><div><strong>Tiana</strong><p>September 24th, 2013</p><div><p>Hi,<br />
I kind of follow your instructions through and through and still got an error,<br />
Liquid error: Expected collection handle (String) but got NilClass.<br />
Any idea how to fix that?<br />
Thanks.</p>
</div></div></div><div class="PostFooterLinks-module--PostFooterLinks--BWXa6"><a href="/tetsby-wordpress-playground/no-tutorial-next-week">« Newer post</a><a href="/tetsby-wordpress-playground/shopify-theme-from-scratch-part-5">Older post »</a></div></main></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-templates-post-jsx","jsonName":"shopify-theme-from-scratch-part-6-f5d","path":"/shopify-theme-from-scratch-part-6"};window.dataPath="337/path---shopify-theme-from-scratch-part-6-f-5-d-437-SIWQkhKXSpU7k84JryXSKcNSTcw";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-29dbb03a1d74b2ce9374.js"],"component---src-templates-page-jsx":["/component---src-templates-page-jsx-f69a7f7043c34981ce1d.js"],"component---src-templates-post-jsx":["/component---src-templates-post-jsx-da4ff8f6c3977c2b12a2.js"],"component---src-templates-post-listing-jsx":["/component---src-templates-post-listing-jsx-947a86816d5517590681.js"],"component---src-pages-404-js":["/component---src-pages-404-js-33036e3bdd675e046038.js"],"pages-manifest":["/pages-manifest-5bb23274f309ce3f260c.js"]};/*]]>*/</script><script src="/tetsby-wordpress-playground/webpack-runtime-ef98225fa2bd5c39df9f.js" async=""></script><script src="/tetsby-wordpress-playground/styles-85e817822b382b3bf7ba.js" async=""></script><script src="/tetsby-wordpress-playground/app-29dbb03a1d74b2ce9374.js" async=""></script><script src="/tetsby-wordpress-playground/component---src-templates-post-jsx-da4ff8f6c3977c2b12a2.js" async=""></script><script src="/tetsby-wordpress-playground/1-26e717f79cfd26ce2270.js" async=""></script></body></html>